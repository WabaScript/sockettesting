<h1>Simple Socket Message Exchange</h1>
    <pre id="messages" style="height: 300px; overflow: scroll;"></pre>
    <input 
        id="message-input" 
        type="text" 
        placeholder="Say something..." 
        style="display:block; width: 50%; margin-bottom: 10px; padding: 15px;" 
    />
    <button id="send-button" title="Send Message!" style="margin-left: 5%; width: 40%; height: 30px;">Send</button>

    <script>
        // On pageload run this function
        (() => {
            const sendButton = document.querySelector('#send-button');
            const messages = document.querySelector('#messages');
            const messageInput = document.querySelector('#message-input');

            let ws;

            const showMessage = (message) => {
                messages.textContent += `\n\n${message}`;
                messages.scrollTop = messages.scrollHeight;
                messageInput.value = '';
            }

            const init = () => {
                if (ws) {
                    ws.onerror = ws.onopen = ws.onclose = null;
                    ws.close();
                }
                // Sends a message to the server
                ws = new WebSocket('ws://localhost:4000');
                ws.onopen = () => {
                    console.log('connection opened!');
                }
                ws.onmessage = ({ data }) => showMessage(data);
                ws.onclose = () => {
                    ws = null;
                }
            }

            sendButton.onclick = () => {
                if (!ws) {
                    showMessage("No Connection ðŸ˜±");
                    return;
                }
                ws.send(messageInput.value);
                showMessage(messageInput.value);
            }

            init();
        })();






    </script>